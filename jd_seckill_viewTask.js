/*
Ê¥ªÂä®ÂêçÁß∞ÔºöÁßíÊùÄÊµèËßàÈ¢Ü‰∫¨Ë±Ü
ÁéØÂ¢ÉÂèòÈáèÔºöjd_seckill_viewTask_interval // Ëá™ÂÆö‰πâËøêË°åÈó¥ÈöîÊó∂ÈïøÔºàÊï¥Êï∞ÔºåÂçï‰ΩçÊØ´ÁßíÔºâÔºåÈªòËÆ§1000
        jd_seckill_viewTask_notify // ÊòØÂê¶Êé®ÈÄÅÈÄöÁü•Ôºàtrue/falseÔºâÔºåÈªòËÆ§‰∏çÊé®ÈÄÅ
        jd_seckill_viewTask_pinFilter // Ë¥¶Âè∑pinËøáÊª§ÔºåÂ§ö‰∏™Áî®@ËøõË°åÂàÜÂâ≤

ÂÆöÊó∂ÈöèÊú∫

*/

const $ = new Env('ÁßíÊùÄÊµèËßàÈ¢Ü‰∫¨Ë±Ü')
var iÔΩâl='jsjiami.com.v7';const IlIlil=iii1II;function iii1II(_0x38103d,_0x1d85fe){const _0x55f0aa=Iii11l();return iii1II=function(_0xe6c6c,_0x25875a){_0xe6c6c=_0xe6c6c-0x190;let _0x539c57=_0x55f0aa[_0xe6c6c];if(iii1II['bxTjvi']===undefined){var _0x344e18=function(_0x25ca34){const _0x40370e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x270c5a='',_0x82d72d='';for(let _0x196f79=0x0,_0x2cff93,_0xfe5bf,_0xef6a57=0x0;_0xfe5bf=_0x25ca34['charAt'](_0xef6a57++);~_0xfe5bf&&(_0x2cff93=_0x196f79%0x4?_0x2cff93*0x40+_0xfe5bf:_0xfe5bf,_0x196f79++%0x4)?_0x270c5a+=String['fromCharCode'](0xff&_0x2cff93>>(-0x2*_0x196f79&0x6)):0x0){_0xfe5bf=_0x40370e['indexOf'](_0xfe5bf);}for(let _0x2fff5b=0x0,_0x574c14=_0x270c5a['length'];_0x2fff5b<_0x574c14;_0x2fff5b++){_0x82d72d+='%'+('00'+_0x270c5a['charCodeAt'](_0x2fff5b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x82d72d);};const _0x38500c=function(_0x222857,_0xde7b27){let _0x4eaa10=[],_0x1ab19f=0x0,_0x100a5b,_0x236253='';_0x222857=_0x344e18(_0x222857);let _0x5d5528;for(_0x5d5528=0x0;_0x5d5528<0x100;_0x5d5528++){_0x4eaa10[_0x5d5528]=_0x5d5528;}for(_0x5d5528=0x0;_0x5d5528<0x100;_0x5d5528++){_0x1ab19f=(_0x1ab19f+_0x4eaa10[_0x5d5528]+_0xde7b27['charCodeAt'](_0x5d5528%_0xde7b27['length']))%0x100,_0x100a5b=_0x4eaa10[_0x5d5528],_0x4eaa10[_0x5d5528]=_0x4eaa10[_0x1ab19f],_0x4eaa10[_0x1ab19f]=_0x100a5b;}_0x5d5528=0x0,_0x1ab19f=0x0;for(let _0x4c60ea=0x0;_0x4c60ea<_0x222857['length'];_0x4c60ea++){_0x5d5528=(_0x5d5528+0x1)%0x100,_0x1ab19f=(_0x1ab19f+_0x4eaa10[_0x5d5528])%0x100,_0x100a5b=_0x4eaa10[_0x5d5528],_0x4eaa10[_0x5d5528]=_0x4eaa10[_0x1ab19f],_0x4eaa10[_0x1ab19f]=_0x100a5b,_0x236253+=String['fromCharCode'](_0x222857['charCodeAt'](_0x4c60ea)^_0x4eaa10[(_0x4eaa10[_0x5d5528]+_0x4eaa10[_0x1ab19f])%0x100]);}return _0x236253;};iii1II['AhlcpK']=_0x38500c,_0x38103d=arguments,iii1II['bxTjvi']=!![];}const _0x4b65a6=_0x55f0aa[0x0],_0x3a743a=_0xe6c6c+_0x4b65a6,_0x131f4a=_0x38103d[_0x3a743a];return!_0x131f4a?(iii1II['JsmooF']===undefined&&(iii1II['JsmooF']=!![]),_0x539c57=iii1II['AhlcpK'](_0x539c57,_0x25875a),_0x38103d[_0x3a743a]=_0x539c57):_0x539c57=_0x131f4a,_0x539c57;},iii1II(_0x38103d,_0x1d85fe);}function Iii11l(){const lillII=(function(){return[...[iÔΩâl,'EAYfjsGjdiyaHmViAl.IKcRdVouTm.HlvqN7UWnB==','WRtdIMZcOcxdQ8oSnSoUm8kIW7pdVfCQWR0qWQ8EW7D/WP1VWPC/W4/cG3/cM8kos8oQrW','k8kPaSoV','WPRdNG5Gqa','t2pdSG','nCoGW4ZdICoj','s8klWOJdTMiK','F3aXaIJdJh/cOSoLW67dM8kWi8k1WP3cNvFcR0NcNSkDWOVcLJP+kSk7W5/cJCkOW4CVWOjE','WPpdNvVcIJq','zg8WoZ8','5lQg6lk+W5VWUkcZ','WO3cMCo2W5Kj','bu9NnXq','6lwv5y235PAg5PAY','qSkHsgtcNwtdOGTvu8kIya','kCoCWOdcV8k8WOFdMa','WQBdNWddVCoyCeyhWQ4jWQb2jCk1zmk0DSoIl1DmW5T0mCkee8kw','g8ojW47cQdb8W5vJC0n4W6O','W6VcOvddRCkk','cmoZW7ZdKSoJWOZdS8oiyuVcK8oaW5mhW54','WPldNM4K','gSk3ptXKr8kYp8kwWQfzW6dcKdSlW65MWQddI8kQoa','kSogaSk1bW','W6JcHYhdSxhcTCkWF8k6yq','WRhcR8oI','5lUP5AsL5BwN5A6P5OUp5lIM5yI+','W6e2eSoFW7lcIYTSWQj4rmkzctVdJG','W4NcTsxdQ8oy','WPpdHt99W7e','WO3dMGz9txyd','W75zW77dVCkras8','WRBOR4VMS53LPQJOT5ft4P+aWOe','W6RdNCkQW6ldOSoYW507W4ilW5RcKmoJWPObyfalumkYWRy','CvidhZ4','cmo/W5ZcHSkggSodd3ZcImkrWO9Y','ecD+WQWk','gmoVuwVcJNNdOGDouW','qImC','W5tcIJDGDSkXW4Tk','amo0fmktbSk6W7JdUYS','WP/dSdyJ','5lQU5yUN6l+i5BMDWQZcMa','orxdHSkgimkKk8oiymk8','WPJdG8oaW6Ty','WP/dUxRcQcC','A8kqWRldR20','WP3cP8o9WPWH','WRpcGCkrW6C','5BEr6k6Y57+76lEw6lYy6lYn6kot5B675yQK6lEF5y2u','WR/cRmkmxI8','tqrIhaRdOG','W7RcHrVdJmoFEa','6lE85y6N5PEV5PE2','WPHvmW','WQRcQ8o/BfRcP8kqWRhcK2favCkaW4uX','rmkDWP7dU1CVW65dswnbW5xcSCo0W4ngWRzdlwVcMq','5lQi6lcmrpcVKRC','yguSbG/cNZ3dQa','5O6X6i2Q5B2H5zkf5lIE55oAlmojvW','a+IVU+AZL+wKLoI3USo94PYdW4JMLiNLKltLUlFML7VMJBu','b8kMkJfyrCk2nSkz','omkPh8o6','WQdcGmoxWOuYusqXWQ9Zomo+yNNdJW','WOtdQmk7W6HM','WOtcS8oGW5iJ','W6ZcKqhdQa','W6NdK8o6hfSNW4ylwSoCW7hdNa0','rSkDWPxdUheI','WQxdJ2/cPa','ymknqSk6W4y','W5hcJI54q8k7W4m','b3PajXeZ','5lMR6lk1W4tWV7kw','WQRcOCoSW4C0m8k2EW','p8kSWQdcTWK','xmkhWPS','W4tcQhieWRW','6Akn5OoQ5zwR','WRRcPCoXW78ppCkYCmkfh8oPW510WPG','jdfXrg/dHwldQCovW5pdU8o4lW','6AgH5yYk5lQH5yIN5AE85yMo5OQz5yQvWRC8','WRRdNSkZW6jv','kSoiWOVcJ8k4','44c05O6A56wE44gr6k225yAq6i675yYIW5NcGhfslCkh','WP1Jg8kdWPFcHd1MWODf','kSkIWQxcTba','e8k3lbvtuCkSmCkhWQe','WRxcHSkkW4FdJHW','W4tcJIPCf8kRW5i','W5i2dmo5W7lcKt4OWPHwxCks','W5lcT03dISkCW7JdHLTc','WRhcPSkHW6xdQG','5y+t6yEV5B+35zkq54Uc5OorzCk2gSoIW4jeAvSdW5W','W6dcQ3BdK8kA'],...(function(){return[...['W7tdNCk6W6JdUW','oYn2WP/dHmoDeCohWQjOeuOihSotW6GTl1pdSSok','A08pW6/cK8k4','WP3dVmkiW7j3aNiouSk/WQ/cKCkcW4qhW797CfPQamkMdCknW5/cJNLgW4m','WQ8brmoyW68','WOtcTmkWW4FdOW','WPKtlSou','W7/dNSoHW7RdSa','WRNdSSodW5n+W7CJ','WQ1Zhmkyaq','W6lcIrTHzq','W7hdJmk9W7NdUmkKWP5cW5SCW4ldQSoVW4Ca','WRFcPmoAW4afoCkWD8k6b8oxW59OWO4JkmkUgf4FW4nhyX3cG8kr','WP8rmmobvG','gmowWP/cVSk8WPRdMmoIW6ivySka','5lQg6lo/W53XG7cq','u2ldKxBcLW','fYnlWQme','WQFdN23cUsNdU8o5','mSotWOddHbdcQCojWOxdHxpdLtiN','WR/cR8oHW4O','qSoiWPtcO1e','WRFcR8oSW50','nCoDW6pcOmkl','WQJdUJm','WQSbnSoizq','pcHWWPFdO8oCgCoB','WRJdIxS','Ch4SaNFdLJtdQmoIW7ldK8oQk8k3W5FcMWS','jSkGrSoywalcUSoOEYVdVu/cQSovca/cKCk0cXjHWQxdH8kYkmkLl1/dNcvPWQWkWPVdP8oTlSk4vuTnWOVdMg5rW5ZcJq','k8ozW4ZdRq','WRtcPCoIwW','WRiSW7jHjG','WRFdUmof','WOdcTmoRwNG','wSkYWP7dR3e','r8kjWPxcNeH1WRS8','W4dcTf7dKCkwW4ZdM1Xpf8oR','qbT1nrhdS2uTW7lcQCkOh8kjW7ZdUbWpWPfGgvPzW7nQu8oWW47cQCk2fSkHWQCO','v8kWs2pcQa','W4pcQSkMW4b2gw8D','mCoUW7NcV8k8','wCowWPdcLW','smk9WPpcMf0','gSoUbCkwhCk5W7tdRG','WOHShW','kmoxWPBdIXBcPmowWO/dGh7dUteSWRpcOv3cM8ksWQ3cRrq','nmkmiSoxCG','wSkVxa','n8owWPy','BK7cGq','WRldSGGwW4a','W7hcUM8','4P2CW6RMNk3OGi3MR7pNOBZLPlxNKjy9','W4/cOLldHG','t8oxWOS','mmkNda','WO0Di8of','WRhdTsTUW4f5WOjuWOS0W786iq','W7u4fSoS','8ys7MwC','WP7cMCoMWRK5','W4hcJJ96BmkTW4S','f8o5W7G','cMXDkqi1','W7tcQhO6WQBdLSoaW7C','amo0aZZdUIpcVqTJF8kHD8oT','WRNcQ8oRwW','WRhcNmoSWQlcOSo+W4fJW7a9W7NdRmoA','ySkVD8kvW7fM','WQJdO8oqW5rEW6uNWQNdHW','WPldQSkLW65GlhWutCkYWPFcGG','W4tWNPkqW4dOVPZOO6hNUAVMNz7cGG','o8kTh8oyEuhcQ8oPjqZcOrpdSCkj','WOpdMGL0D2S','4P2mWPdMNkRNNiBORR3MSiZcTW','WOJdMHnFyNClW7C2gSkGWR0bWPVdJCo2W4BcVmol','WQ3cTCo2W5S','k8oBWP0','nHnfWQ80W64YW5e','5lIw5yQJ6l6Y5BMeW4ddLW','WRNdLxS','e8oFWRJdPWC','B8kZxM7cJG','ESk9WO3dIMO','WPZdPcybW48','dmo3W7BdJCoEWONdSSo7','WOtdTmk+W6j3','W6ZdHSkCW6pdOW','lSk9bCoEEeO','lmk6bmk1EWdcQSoKBJNcRXi','s8oZWPFcGf4','W7RdUmkWW6pdSG','WOtdTWXxCG','56wqW7tOVi7OO57PLAxPMzZMLitPLAS'],...(function(){return['WQVdTtvG','wmkCWOJcMg8MW7L2W7NdGIHvwh7cRmkuou7cLchcSfxdGZxdV3RdT8kgW4CzWRilWQT+zr01WQTSyuThFv9Ngmo+W6NcOmkUurbUs8oAv8oCcbNdHcxdPYH5WRddRha+W5hdJXG','oCozp8kGga','WQxcGCk1W4VdRa','W6ldNSkcW5TVdbKdWPqJjSo1','WQmJW4PKoq','kmk8h8kQ','6Acx5y6p5lQz5yIS5AEb5yMo5OMA5yQAW7yp','W7/cLCotW6FdHG','vM7dUv/cPG','fmoEWPpcJ8km','WPVcGSk8rdi','WOVdOSoOW4Ty','WRTpamkfWOO','4P+VW4VOHytMNlJOV7lOOPtPG6hLIj/KUQ7PL5NOROVcMG','W6RcQvOmWOK','WP3cG8o3vuu','WR1TfmkokCojW6FcTCoGW7WcE2/cR8ol','WQDQemkmoCojW53cSq','z8kRBSkeW4r7xhu','WRBcM8kVW5pdTCkWWOrU','Cu4vW5RcJSoMl8ogFcXDWRldRhZdP8oErN1LW4e','xSoCWOxcHGKEusZdTSoOwCofESorm8oMW4NcGSkvWPdcHtNdQ8kVWRpcRh5tASoWW7tcOcivWPtcS8okwmkWWQNcKmohW6/dSx/cPhVcLCkBCmoSfej1WOVdTdGdWOWSyb4D','nSk4etj5','W4RcOYxdUmo/','mY99WPRdUSoubq','nSk9WOtcRXndW7jXl8obWQ/cQwvkxW','W4BdS8oIW7/dKCkKW48WWR7cOSoVWPRdRbdcJW','4P+TW6pOHkxMNO/OVklOO5pPG6JLIi3KUR3PLBVORBDp','tCkDWPxdJwqKW6DduLv2W4JcT8oXW40','z8kRBSke','WPNdSI/cOJFcMrG','W7PtW7G','q8kXvmojxmoOWQFcQMOO','W7S9pCo+W7lcNcfSWQbdCSkbbdhdJSkLB8kFWRGFWONdNmktW7ZdK8kHW6pdIa','WR8+Eq','n8o/WR7dOay','iajCWRCf','WR3dGtD1W5q','W4VdIh7cK0NcS0u','W7jDW6VdUa','CKCEW6TtWRfSW4pdRmkTWOrOW4m','v33dHMpcNq','WRRcH8odWO4Lqq','WPVdT8kW','5lMc6lc0z/c3Kii','WQhdM2/cPXZdUSoIjCo1oCk/WQ8','W6H0WRrhacr2W4fl','WO7cLSo8W5iy','WR3cLmk/qXPqWPW/wG','WQNcOCoSvvBcV8kDWO7cLfnEB8kfW5KT','W6FdNwNcTw0','WPHSk8kLWPi','mSk5WO7cSa','WOVcSZ0','WQjRfa','sSkJWQJcICk5W5tcQSooBwJcHCoIW5K','w+kCISk/','WPLJgSkjWQRcHrzGWOfbcSk7','zhCMW4ZcO8kokSoNWPHikhu','sqyGk8ou','W6ZdSmk3dqJdPSobWR/cUx9zx8kP','WQNdHsPJsW','6AgE5yYW5lI25yQn5As+5yQI5OUJ5yUebCk6','W5FcKNaVWPO','WRhdUWTXW6D4WP5w','wSomWO7cMG','WPNdVCkYW6vabhqismk2WRpcImkeW4OzW45tBvvqca','6AoA5yYE5lQq5yI65Awa5yQF5OUq5yIFENO','eSoBW4tcO8ka','W7aQeCoKW7dcKq','WRBcG8kOsdP2WP40sCo/W5pdHqNdP8okpSkvW4j2WOldUq','gmk9pW','t8kRWPVdM8oMqCkddL7cRCk3WOv3','WQBcMqRdPmod','EmkRtmk+W4e','W4NcQhjTWOxcSmknWOxdJe8','BLlcHCoqbG','v8knWPlcVv0','WO/cRtpdL8oD','WPRdSfVcMHK','WP4tnCobwuhcRXD4W6S','tqrI','8jABOuq','W6VdTmk/','WR8SW6TN','DCkwWOtcVSkWWPJdN8oGW6qjCmkamSolr18','z0/cKa','p2DNmqS','fCoWW5ZcImkGbG','WOVcSmk0tra','W4FcQKC','WQxdJKpcVcxdPG','44gr6lwu5y+B'];}())];}())];}());Iii11l=function(){return lillII;};return Iii11l();};(function(II1i1,lI1lll,iIiII,iil1lI,iiiliI,li1i1I,illIii){return II1i1=II1i1>>0x3,li1i1I='hs',illIii='hs',function(ii1il1,lI1llI,illIil,Ill1I,i11iiI){const llI1I1=iii1II;Ill1I='tfi',li1i1I=Ill1I+li1i1I,i11iiI='up',illIii+=i11iiI,li1i1I=illIil(li1i1I),illIii=illIil(illIii),illIil=0x0;const lIli11=ii1il1();while(!![]&&--iil1lI+lI1llI){try{Ill1I=-parseInt(llI1I1(0x1da,'CzeP'))/0x1*(-parseInt(llI1I1(0x29c,'KAId'))/0x2)+parseInt(llI1I1(0x281,'yGs9'))/0x3*(-parseInt(llI1I1(0x2a8,'nKM3'))/0x4)+-parseInt(llI1I1(0x2a5,'E!*b'))/0x5+parseInt(llI1I1(0x250,'d[VP'))/0x6+-parseInt(llI1I1(0x296,'d@*l'))/0x7+-parseInt(llI1I1(0x1ff,'VpJ9'))/0x8+-parseInt(llI1I1(0x271,'6rNr'))/0x9;}catch(lllI1I){Ill1I=illIil;}finally{i11iiI=lIli11[li1i1I]();if(II1i1<=iil1lI)illIil?iiiliI?Ill1I=i11iiI:iiiliI=i11iiI:illIil=i11iiI;else{if(illIil==iiiliI['replace'](/[yEKdVfIGBuRHAlUqTNnYW=]/g,'')){if(Ill1I===lI1llI){lIli11['un'+li1i1I](i11iiI);break;}lIli11[illIii](i11iiI);}}}}}(iIiII,lI1lll,function(lillI1,IlIlii,i1l1i1,liil11,iiillI,l1l111,l1iIII){return IlIlii='\x73\x70\x6c\x69\x74',lillI1=arguments[0x0],lillI1=lillI1[IlIlii](''),i1l1i1=`\x72\x65\x76\x65\x72\x73\x65`,lillI1=lillI1[i1l1i1]('\x76'),liil11=`\x6a\x6f\x69\x6e`,(0x1731e6,lillI1[liil11](''));});}(0x608,0x9d97c,Iii11l,0xc3),Iii11l)&&(iÔΩâl=0x103f);const jdCookie=require(IlIlil(0x1d4,'d[VP')),notify=require(IlIlil(0x1c0,'z!jy')),common=require('./utils/Rebels_jdCommon'),{H5st}=require(IlIlil(0x1a9,'8vsa'));let taskThreads=process['env']['jd_seckill_viewTask__threads']||'1';const runInterval=process[IlIlil(0x245,'SXC#')][IlIlil(0x28f,'M7*u')]||IlIlil(0x1c4,'fs9N'),isNotify=(process[IlIlil(0x290,'Az)s')][IlIlil(0x21a,'C*%M')]||process[IlIlil(0x240,'CzeP')]['jd_seckill_viewTask_Notify'])===IlIlil(0x1df,'!Ql*'),pinFilter=(process[IlIlil(0x23b,'0L*M')][IlIlil(0x211,'M2yk')]||'')[IlIlil(0x1ef,'M2yk')]('@'),maxThreads=0x3;let cookiesArr=Object[IlIlil(0x1d8,'(#]S')](jdCookie)['map'](l1llIi=>jdCookie[l1llIi])['filter'](II1llI=>II1llI);!cookiesArr[0x0]&&($[IlIlil(0x229,'LEld')]($[IlIlil(0x26d,'WAs[')],IlIlil(0x203,'4qA3')),process['exit'](0x1));!(async()=>{const lIli1I=IlIlil,i11I11={'NsvTu':function(l1llIl){return l1llIl();}};notify['config']({'title':$[lIli1I(0x22d,'T(yt')]}),await i11I11['NsvTu'](Main),isNotify&&notify['getMessage']()&&await notify[lIli1I(0x1f4,'LEld')]();})()[IlIlil(0x22e,'KAId')](ii1I1l=>$[IlIlil(0x1e2,'mg0Z')](ii1I1l))[IlIlil(0x286,'nKM3')](()=>$['done']());async function Main(){const II1il=IlIlil,ii1I1i={'WuyOK':II1il(0x209,'M7*u'),'tqSFB':function(llI,llliI){return llI>=llliI;},'brQIL':'frufS','CdqhZ':function(iI1li1,lllii1){return iI1li1(lllii1);},'OJGVU':function(liIli,liIll){return liIli>liIll;},'MFdcG':II1il(0x284,']CI*'),'OWBHj':II1il(0x1dc,'LEld'),'CTbVh':function(IilIi1,iI1liI){return IilIi1!==iI1liI;},'NpvHj':II1il(0x231,'E5fg'),'ebmbP':'tgcrw','bgErP':'‚ö†\x20Ëá™ÂÆö‰πâËøêË°åÈó¥ÈöîÊó∂ÈïøËÆæÁΩÆÈîôËØØ','nPIwq':function(l1lIiI,llliiI){return l1lIiI===llliiI;},'ZpddG':II1il(0x27d,'T(yt'),'pnDSH':'lpTSk','nEkNR':II1il(0x27c,'JQZr')};try{try{if(ii1I1i['brQIL']!==ii1I1i[II1il(0x270,'!Ql*')])delete I1ilIi['data'],delete IiiiI['headers'][ii1I1i['WuyOK']];else{const IlII1=ii1I1i[II1il(0x278,'nDpJ')](parseInt,taskThreads);ii1I1i[II1il(0x1a3,'LEld')](IlII1,0x0)&&IlII1!==0x1&&(taskThreads=IlII1);}}catch{if(II1il(0x19e,'wkIJ')!==II1il(0x269,'SXC#'))taskThreads=0x1;else return Iliill;}taskThreads=Math[II1il(0x25c,'aneB')](taskThreads,maxThreads),$[II1il(0x1d6,'fs9N')]=null;if(runInterval){if(ii1I1i[II1il(0x201,'M2yk')]!==ii1I1i['OWBHj'])try{const lli=parseInt(runInterval);lli>=0x0&&($[II1il(0x280,'wkIJ')]=lli);}catch{if(ii1I1i[II1il(0x1db,'DrbL')](ii1I1i[II1il(0x2a0,'rkMf')],ii1I1i['ebmbP']))console['log'](ii1I1i['bgErP']);else try{const lll=lI1Iii(i1li);ii1I1i[II1il(0x297,')6@L')](lll,0x0)&&(IliI11[II1il(0x1f9,'C*%M')]=lll);}catch{i1l1lI[II1il(0x2a4,'8y@g')]('‚ö†\x20Ëá™ÂÆö‰πâËøêË°åÈó¥ÈöîÊó∂ÈïøËÆæÁΩÆÈîôËØØ');}}else lilii['assign'](l1iiI,ll1li);}$[II1il(0x19a,'nDpJ')]=[],console[II1il(0x22f,'DrbL')](II1il(0x19f,'(#]S')+$[II1il(0x244,'h$uT')]+II1il(0x20c,'CzeP')),console[II1il(0x246,'kvTi')](II1il(0x1ea,'q)W!')+$['waitTime']/0x3e8+II1il(0x26c,'yGs9')),console[II1il(0x19b,']CI*')]('ÈÄöÁü•Êé®ÈÄÅ:\x20['+(isNotify?'ÂºÄÂêØ':'ÂÖ≥Èó≠')+']'),console[II1il(0x1c8,'C*%M')]('Ë¥¶Âè∑ËøáÊª§:\x20['+pinFilter[II1il(0x224,'C*%M')](',\x20')+']'),console['log'](II1il(0x1c7,'LEld')+$[II1il(0x1a8,'KAId')]+'ÂèòÈáèÁä∂ÊÄÅÁªìÊùü=========='),console[II1il(0x24d,'E!*b')](''),await common['concTask'](taskThreads,cookiesArr,taskFnc),$[II1il(0x288,'i]ih')]=![],$[II1il(0x207,'!Ql*')]=![];ii1I1i['OJGVU']($['needRemoveCookieIndex'][II1il(0x1f3,'E5fg')],0x0)&&(ii1I1i[II1il(0x1bc,'WKIF')](ii1I1i[II1il(0x230,'T(yt')],II1il(0x215,'i]ih'))?(i1l1ll=I1iIiI['filter']((iI1lii,IilIii)=>!lilIii[II1il(0x20f,'nKM3')]['includes'](IilIii+0x1)),i1ilil[II1il(0x1c5,']CI*')]=[]):(cookiesArr=cookiesArr['filter']((iI1lil,l1lIi1)=>!$['needRemoveCookieIndex'][II1il(0x27f,'8y@g')](l1lIi1+0x1)),$[II1il(0x23c,'aneB')]=[]));const IilIiI=notify[II1il(0x206,']CI*')]();IilIiI&&console[II1il(0x2a3,'l]Bq')](II1il(0x256,'8y@g')+IilIiI[II1il(0x1f6,'fs9N')](/Ôºö/g,II1il(0x2a6,'E!*b')));}catch(iIli1l){ii1I1i[II1il(0x21e,')6@L')]===ii1I1i[II1il(0x198,'EV5u')]?i1III[II1il(0x299,'M2yk')](II1il(0x27b,'fs9N')+Ii1iIi):console['log'](II1il(0x289,'h$uT')+iIli1l);}}async function taskFnc(liiIIl,iil1iI){const lllI11=IlIlil,IlIllI={'AEPbi':function(IlIIl,lI1liI){return IlIIl===lI1liI;},'PuJvh':lllI11(0x29d,'C*%M'),'uQKfQ':function(i1i1Ii,lllii){return i1i1Ii<=lllii;},'ztGss':lllI11(0x260,'aneB'),'MpVRn':function(iI11Ii,iIII1l){return iI11Ii-iIII1l;},'hqiQw':function(lllil,iI11Il){return lllil+iI11Il;},'JTiyI':lllI11(0x1c3,'E!*b'),'VrQad':lllI11(0x27a,'0L*M'),'AhIph':function(iIII1i,iil1i1){return iIII1i===iil1i1;},'DlINP':lllI11(0x22c,'E!*b'),'FgGFx':lllI11(0x275,'!Ql*'),'wWzDk':function(il1i11,IlIll1){return il1i11==IlIll1;},'PYsji':lllI11(0x1a7,'T(yt'),'PEvUo':lllI11(0x242,'WAs['),'NNMwv':'https://api.m.jd.com/client.action','BSPqN':lllI11(0x1ca,'M7*u'),'ICLMY':lllI11(0x235,'d[VP'),'JboNx':lllI11(0x1b1,'LEld'),'ftcnf':lllI11(0x22a,'VpJ9'),'ledAo':'keep-alive','unBGh':lllI11(0x234,'mg0Z'),'fVFme':'cors','xQnqc':'GET','hDILd':lllI11(0x21c,'8vsa'),'qcwab':lllI11(0x276,')6@L'),'pGEJV':function(IlIII,ilil1l){return IlIII>=ilil1l;},'JpXuu':lllI11(0x227,'7ZTL'),'aTdlQ':lllI11(0x273,'kvTi'),'gJArG':function(illlIi,I1lIii){return illlIi(I1lIii);},'QURwj':lllI11(0x28c,'rkMf'),'NvSpC':'https://pro.m.jd.com','XduGN':'hybrid-video;hybrid-image','qMMOB':lllI11(0x283,'SXC#'),'JYYZp':function(IiI1I,illlIl){return IiI1I(illlIl);},'xUopA':function(i11ill,IIIIIi,IIIIIl){return i11ill(IIIIIi,IIIIIl);},'ozBpj':function(I1lIil,IIIl1i){return I1lIil>IIIl1i;},'noBqr':function(liiII1,IIIl1l){return liiII1===IIIl1l;},'TxIqn':'boolean','CGTEC':'Ë¥¶Âè∑Êó†Êïà','VQgxd':lllI11(0x1c6,'#tpB'),'qqzEa':function(lllll,i11ili){return lllll>i11ili;},'OgbEU':function(iil1l1,lllli){return iil1l1(lllli);},'vtdzj':function(iiili1,ill11i,lllill){return iiili1(ill11i,lllill);},'YseaC':function(ill11l,I1lIiI){return ill11l*I1lIiI;},'HRNoQ':lllI11(0x272,'KAId'),'FzMpH':function(lllili){return lllili();}};if($[lllI11(0x1e3,'z!jy')])return{'runEnd':!![]};const il1i1I=IlIllI['JYYZp'](decodeURIComponent,common[lllI11(0x257,'kvTi')](liiIIl,lllI11(0x1af,'LEld')));function lI1li1(IliiiI,Ill11){const I1lIll=lllI11;if(IlIllI[I1lIll(0x1cb,'z!jy')](IlIllI[I1lIll(0x279,'DrbL')],I1lIll(0x1ad,'nDpJ'))){if(IlIllI[I1lIll(0x212,'Az)s')](IliiiI['length'],0x4))return IliiiI;else{if(I1lIll(0x1fc,'JQZr')!==IlIllI[I1lIll(0x1fa,'^4cQ')]){const liiIII=IliiiI[I1lIll(0x265,'M2yk')](0x0,0x2),li1i11=IliiiI['slice'](-0x2),iI11I1=Math['max'](IlIllI[I1lIll(0x24b,'6rNr')](Ill11,liiIII[I1lIll(0x258,'NLxF')])-li1i11['length'],0x0),il1i1l='*'[I1lIll(0x253,'wkIJ')](iI11I1);return IlIllI[I1lIll(0x1a2,'l]Bq')](liiIII+il1i1l,li1i11);}else IlI1il[I1lIll(0x25f,'LEld')](IilliI+'‰ªäÂ§©Â∑≤ÂÆåÊàê‰ªªÂä°');}}else ll1ll[I1lIll(0x1b6,'E5fg')](Illl11,ii1lI);}const iI11II=IlIllI[lllI11(0x26f,'#tpB')](decodeURIComponent,il1i1I),iIII1I=IlIllI[lllI11(0x239,'RFyM')](lI1li1,iI11II,0x6),ilil1i=lllI11(0x1b0,'d@*l')+iil1iI+'„Äë'+iIII1I+'Ôºö',IlIIi=notify['create'](iil1iI,il1i1I);if(IlIllI[lllI11(0x205,'^4cQ')](pinFilter[lllI11(0x1f7,'WKIF')],0x0)&&(pinFilter[lllI11(0x23a,'#tpB')](il1i1I)||pinFilter[lllI11(0x24f,'JQZr')](encodeURIComponent(il1i1I)))){IlIIi[lllI11(0x1d5,'4qA3')](lllI11(0x1e0,')6@L')),console[lllI11(0x1e5,'cHHQ')](IlIIi['getInlineContent']()),$[lllI11(0x1e7,'E5fg')]['push'](iil1iI);return;}const IiI1l=await common[lllI11(0x1fe,'C*%M')](liiIIl);if(!IiI1l&&IlIllI[lllI11(0x266,'yGs9')](typeof IiI1l,IlIllI[lllI11(0x1ab,'WKIF')])){console[lllI11(0x28d,'Ih8v')](ilil1i+lllI11(0x1e4,'Az)s')),IlIIi[lllI11(0x1ae,'h$uT')](IlIllI[lllI11(0x213,'!Ql*')]),$[lllI11(0x196,'M2yk')][lllI11(0x195,'SXC#')](iil1iI);return;}const illlII=common[lllI11(0x1a1,'RFyM')](il1i1I);let iIII11=![],IiI1i=![],llll1,lil11l;llll1='',lil11l=0x0,await I1lIl1(lllI11(0x29f,'T(yt'));if(iIII11)return;if(llll1){if(IlIllI[lllI11(0x1cc,'WAs[')]!==IlIllI[lllI11(0x21f,'d@*l')]){const IlIlli=lI1Iil(lilIiI);IlIlli>=0x0&&(IiilIi[lllI11(0x232,'RFyM')]=IlIlli);}else{if(!llll1[lllI11(0x233,'h$uT')]&&llll1['taskThreshold']){let il1i1i=IlIllI[lllI11(0x237,'EV5u')](llll1[lllI11(0x1d2,'EV5u')],llll1[lllI11(0x1be,'d[VP')]);if(IlIllI[lllI11(0x202,'8vsa')](il1i1i,0x0)){if(lllI11(0x218,'fs9N')===lllI11(0x2a9,'4qA3'))ll1ii[lllI11(0x1fb,'RFyM')](lllI11(0x243,'wkIJ')+IIli11+'\x20ËØ∑Ê±ÇÂìçÂ∫î\x20'+(IllIII['message']||ii1li));else for(let i11ilI=0x0;i11ilI<il1i1i;i11ilI++){console[lllI11(0x1aa,'CzeP')](ilil1i+lllI11(0x1d9,'nKM3')+llll1['taskProgress']+'/'+llll1[lllI11(0x248,'WAs[')]),lil11l=0x1,await I1lIl1(IlIllI[lllI11(0x193,'JQZr')]),await $[lllI11(0x214,'7ZTL')](parseInt(IlIllI[lllI11(0x263,'(#]S')]($[lllI11(0x264,'E!*b')]*0x1,0x1f4),0xa)),llll1[lllI11(0x29b,'LEld')]>=llll1['taskThreshold']&&(lil11l=0x2,await IlIllI[lllI11(0x277,'8vsa')](I1lIl1,IlIllI['JTiyI']),await $[lllI11(0x2a2,'^4cQ')](IlIllI[lllI11(0x293,'WAs[')](parseInt,$['waitTime']*0x1+0x1f4,0xa)),IlIllI['wWzDk'](lil11l,0x2)&&(console['log'](ilil1i+lllI11(0x192,'nDpJ')+llll1[lllI11(0x294,'rkMf')]+lllI11(0x1ba,'E5fg')),IlIIi['insert'](lllI11(0x200,'l]Bq')+llll1['beanNum']+'‰∫¨Ë±Ü\x20üê∂')));}}else console[lllI11(0x22f,'DrbL')](ilil1i+lllI11(0x25e,'0L*M')+llll1[lllI11(0x2a7,'0L*M')]+'/'+llll1[lllI11(0x221,'aneB')]),lil11l=0x2,await I1lIl1(lllI11(0x287,'^4cQ')),await $['wait'](IlIllI[lllI11(0x20e,'yGs9')](parseInt,IlIllI[lllI11(0x261,'d[VP')]($[lllI11(0x1d6,'fs9N')],0x1)+0x1f4,0xa)),lil11l==0x2&&(console['log'](ilil1i+lllI11(0x200,'l]Bq')+llll1[lllI11(0x216,'DrbL')]+lllI11(0x1e8,'4qA3')),IlIIi[lllI11(0x298,'6rNr')](lllI11(0x197,'kvTi')+llll1[lllI11(0x24c,'fs9N')]+lllI11(0x1f8,'!Ql*')));}else console['log'](ilil1i+lllI11(0x1c9,')6@L'));await IlIllI['gJArG'](I1lIl1,IlIllI[lllI11(0x285,'z!jy')]),IiI1i&&(IlIllI['HRNoQ']==='kxXdO'?IlI1iI['log']('‚ùì'+Iillil+'\x20'+l1lIli[lllI11(0x1ec,']CI*')](lIIiiI)):(await IlIllI[lllI11(0x191,'NLxF')](lil11i),await $['wait'](parseInt(IlIllI[lllI11(0x1f0,'C*%M')]($[lllI11(0x25d,'d@*l')],0x1)+0x1f4,0xa))));}}if($[lllI11(0x210,'q)W!')])return{'runEnd':!![]};await $[lllI11(0x1b2,'kvTi')](IlIllI['xUopA'](parseInt,$[lllI11(0x1e9,'VpJ9')]*0x1+0x1f4,0xa));async function i1i1Il(llllI,lllil1){const I1lIli=lllI11;try{switch(llllI){case IlIllI['JTiyI']:if(lllil1[I1lIli(0x247,'7ZTL')]==='0'&&lllil1[I1lIli(0x249,'M7*u')])llll1=lllil1['data'];else lllil1['errorMessage']?I1lIli(0x217,'8y@g')===IlIllI['VrQad']?II1Il=lilIlI:(console[I1lIli(0x1a5,'mg0Z')](''+ilil1i+lllil1[I1lIli(0x255,'M2yk')]),iIII11=!![]):console[I1lIli(0x299,'M2yk')]('‚ùì'+llllI+'\x20'+JSON['stringify'](lllil1));break;case'popRetainWindow':if(lllil1[I1lIli(0x251,'T(yt')]==='0'&&lllil1[I1lIli(0x1f1,'z!jy')])[I1lIli(0x1fd,'CzeP')][I1lIli(0x238,'SXC#')](ilil1I=>lllil1['data']['title'][I1lIli(0x228,'nKM3')](ilil1I))&&(IiI1i=!![]);else{if(lllil1[I1lIli(0x29e,'nDpJ')]){}else IlIllI['AhIph'](I1lIli(0x20b,'!Ql*'),'vUEgJ')?console['log']('‚ùì'+llllI+'\x20'+JSON[I1lIli(0x1d7,'#tpB')](lllil1)):(I1i11l[I1lIli(0x1b4,')6@L')](llIlii+I1lIli(0x274,'M7*u')+llIlil[I1lIli(0x1cd,'NLxF')]+I1lIli(0x29a,'7ZTL')),IIlil[I1lIli(0x1ac,'EV5u')]('È¢ÜÂèñ‰ªªÂä°Â•ñÂä±ÊàêÂäü:\x20'+ilI1lI['beanNum']+I1lIli(0x21d,'SXC#')));}break;}}catch(ii1iiI){console[I1lIli(0x23f,'8vsa')]('‚ùå\x20Êú™ËÉΩÊ≠£Á°ÆÂ§ÑÁêÜ\x20'+llllI+'\x20ËØ∑Ê±ÇÂìçÂ∫î\x20'+(ii1iiI['message']||ii1iiI));}}async function I1lIl1(lllilI){const II1ii=lllI11;if($[II1ii(0x267,'kvTi')])return;let ilil11='',illlI1=null,IIIl11=null,I1lIi1=IlIllI['DlINP'],liiIIi={},lil11I={};switch(lllilI){case II1ii(0x219,'yGs9'):lil11I={'appId':IlIllI[II1ii(0x241,'(#]S')],'functionId':IlIllI['JTiyI'],'appid':II1ii(0x27e,'8y@g'),'clientVersion':common['getLatestAppVersion'](),'client':II1ii(0x292,'d@*l'),'body':{'taskType':lil11l,'skuId':IlIllI['wWzDk'](lil11l,0x1)?IlIllI[II1ii(0x223,'SXC#')](IlIllI[II1ii(0x1bb,'C*%M')],common[II1ii(0x28a,'E5fg')](0xb,II1ii(0x28e,'#tpB'))):undefined},'version':IlIllI[II1ii(0x262,'E5fg')],'ua':illlII,'t':!![]};if(IlIllI[II1ii(0x1dd,'E5fg')](lil11l,0x0))delete lil11I[II1ii(0x222,'C*%M')][II1ii(0x1b9,'VpJ9')];liiIIi=await H5st['getH5st'](lil11I),ilil11=IlIllI[II1ii(0x1de,'6rNr')],illlI1=liiIIi[II1ii(0x1a4,'7ZTL')];break;case II1ii(0x1e6,'T(yt'):lil11I={'appId':IlIllI[II1ii(0x1b8,'LEld')],'functionId':IlIllI['BSPqN'],'appid':II1ii(0x1ee,'6rNr'),'clientVersion':common[II1ii(0x25a,'NLxF')](),'client':IlIllI[II1ii(0x225,'EV5u')],'body':{},'version':IlIllI['PEvUo'],'ua':illlII,'t':!![]},liiIIi=await H5st[II1ii(0x208,'fs9N')](lil11I),ilil11=II1ii(0x1b7,'VpJ9'),illlI1=liiIIi[II1ii(0x204,'0L*M')];break;default:console[II1ii(0x2a3,'l]Bq')](II1ii(0x259,'NSDE')+lllilI);return;}const Iliii1={};illlI1&&('NaNPC'===II1ii(0x1b3,'NLxF')?iI1lli=ll1iI[II1ii(0x295,'Ih8v')]:Object[II1ii(0x199,'M7*u')](illlI1,Iliii1));IIIl11&&Object[II1ii(0x24e,'WKIF')](IIIl11,Iliii1);const iIiIi={'url':ilil11,'method':I1lIi1,'headers':{'Accept':IlIllI[II1ii(0x1c2,'h$uT')],'Accept-Encoding':IlIllI['ftcnf'],'Accept-Language':II1ii(0x22b,'kvTi'),'Connection':IlIllI['ledAo'],'Content-Type':IlIllI[II1ii(0x2a1,'0L*M')],'Cookie':liiIIl,'Origin':II1ii(0x282,'q)W!'),'Referer':II1ii(0x26e,'RFyM'),'x-rp-client':'h5_1.0.0','Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':IlIllI[II1ii(0x1d1,'VpJ9')],'Sec-Fetch-Site':'same-origin','User-Agent':illlII},'params':IIIl11,'data':illlI1,'timeout':0x7530};I1lIi1===IlIllI[II1ii(0x26a,'yGs9')]&&(delete iIiIi['data'],delete iIiIi[II1ii(0x1ce,'Ih8v')][IlIllI[II1ii(0x23d,'kvTi')]]);const iil1ll=0x1;let iiilil=0x0,iil1li=null;while(iiilil<iil1ll){if(IlIllI[II1ii(0x21b,'7ZTL')]!=='ublzy')IllIIl[II1ii(0x23e,'d[VP')]('‚ùì'+IiiIi1+'\x20'+l1ii1[II1ii(0x254,'DrbL')](ii1ll));else{iiilil>0x0&&await $[II1ii(0x28b,'wkIJ')](0x3e8);const iiilii=await common[II1ii(0x220,'LEld')](iIiIi);if(!iiilii['success']){if(IlIllI[II1ii(0x20d,'h$uT')]('GPHBO',II1ii(0x26b,'NLxF')))IIllI=!![];else{iil1li=II1ii(0x24a,'7ZTL')+lllilI+II1ii(0x1cf,'Ih8v')+iiilii[II1ii(0x1a0,'CzeP')],iiilil++;continue;}}if(!iiilii['data']){iil1li=II1ii(0x1a6,'4qA3')+lllilI+II1ii(0x1eb,')6@L'),iiilil++;continue;}await i1i1Il(lllilI,iiilii[II1ii(0x1ed,'kvTi')]);break;}}IlIllI[II1ii(0x1f5,'wkIJ')](iiilil,iil1ll)&&console['log'](iil1li);}async function lil11i(){const IIIIII=lllI11;if(IlIllI[IIIIII(0x19d,'l]Bq')](IlIllI['JpXuu'],IlIllI['JpXuu'])){const IlIli1={'has_native':'0','babelChannel':IlIllI['aTdlQ'],'commontitle':'no','transparent':'1','hybrid_err_view':'1','copSource':'miaosha','jumpFrom':'1','tttparams':IlIllI[IIIIII(0x1e1,'nDpJ')](btoa,JSON[IIIIII(0x20a,'h$uT')]({'gLat':'','un_area':'','dLat':'','prstate':'0','addressId':'','lat':'','posLat':'','posLng':'','gps_area':IlIllI[IIIIII(0x1d3,'d@*l')],'lng':'','gLng':'','model':'iPhone11,8','dLng':''}))},illIiI=new URLSearchParams(IlIli1)[IIIIII(0x194,'WAs[')](),lI1lli=await common[IIIIII(0x1bf,'8vsa')]({'url':'https://pro.m.jd.com/mall/active/Md9FMi1pJXg2q7qc8CmE9FNYDS4/index.html?'+illIiI,'method':IIIIII(0x226,'NLxF'),'headers':{'Origin':IlIllI[IIIIII(0x1b5,'E!*b')],'Referer':IIIIII(0x1d0,'yGs9'),'Cookie':liiIIl,'User-Agent':illlII,'hybridXslAvailableElements':IlIllI['XduGN'],'Host':IIIIII(0x268,'kvTi'),'Accept':IlIllI[IIIIII(0x291,'aneB')]},'proxy':null,'debug':![],'timeout':0x7530}),Ill1l=lI1lli['data'];return Ill1l;}else{IiiIl1['log'](lIIil1+'Ë¥¶Âè∑Êó†Êïà'),IIli1['fix'](IIIIII(0x1bd,'#tpB')),II1liI['needRemoveCookieIndex'][IIIIII(0x25b,'C*%M')](IlI1i1);return;}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `üîî${this.name}, ÂºÄÂßã!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t.stack) : this.log("", `‚ùóÔ∏è${this.name}, ÈîôËØØ!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
